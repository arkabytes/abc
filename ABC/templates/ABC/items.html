{% include 'ABC/header.html' with title='Items' search_form=True %}
{% load static %}
{% load i18n %}
{% load humanize %}

<div class="container">
    <div class="navbar">
        <ol class="breadcrumb">
            <li><a href="{% url 'index' %}">ABC</a></li>
            <li class="active">{% trans 'Items' %}</li>
            <li><a href="{% url 'index' %}"><img src="{% static 'ABC/icons/izquierda16.png' %}" title="{% trans 'Go back' %}"/></a></li>
        </ol>
    </div>
</div>

<div class="container">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>#</th>
                <th> </th>
                <th>{% trans 'Name' %}</th>
                <th>{% trans 'Description' %}</th>
                <th>{% trans 'Retail price' %}</th>
                <th> </th>
                <th> </th>
            </tr>
        </thead>
        <tbody>
        {% if items %}
            {% for item in items %}
                <tr id="{{ item.name }}">
                    <td>{{ item.id }}</td>
                    <td><img src="{% static 'ABC' %}{{ item.thumbnail.url }}" width="25" height="25"/></td>
                    <td><a href="{% url 'item' item.id %}">{{ item.name }}</a></td>
                    <td>{{ item.description | safe | truncatewords:10 }}</td>
                    <td>{{ item.retail_price | floatformat:2 | intcomma }} â‚¬</td>
                    <td><a class="btn btn-sm btn-warning eliminar" href="#">{% trans 'Modify' %}</a></td>
                    <td><a class="btn btn-sm btn-danger eliminar" onclick="return confirm('{% trans 'Are you sure?' %}');"
                           href="{% url 'remove_item' item.id %}">{% trans 'Delete' %}</a></td>
                </tr>
            {% endfor %}
        {% endif %}
        </tbody>
    </table>

    {% if items.has_other_pages %}
    <nav class="nav navbar" aria-label="Paginacion">
        <ul class="pager">
            {% if items.has_previous %}
                <li><a id="previous" href="?page={{ items.previous_page_number }}" aria-label="Previous"><span aria-hidden="true">{% trans 'Previous' %}</span></a></li>
            {% else %}
                <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">{% trans 'Previous' %}</span></a></li>
            {% endif %}
            {% if items.has_next %}
                <li class=""><a id="next" href="?page={{ items.next_page_number }}" aria-label="Next"><span aria-hidden="true">{% trans 'Next' %}</span></a></li>
            {% else %}
                <li class="disabled"><a href="#" aria-label="Next"><span aria-hidden="true">{% trans 'Next' %}</span></a></li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <div class="container" style="margin-left:0px;width:25%">
        <form class="form-anadir" action="{% url 'add_item' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset>
                <legend></legend>
                <label for="inputName" class="sr-only">{% trans 'Name' %}</label>
                <input type="text" name="name" id="inputName" class="form-control" placeholder="{% trans 'Name' %}" required autofocus>
                <label for="inputNumber" class="sr-only">{% trans 'Description' %}</label>
                <input type="text" name="description" id="inputName"  class="form-control" placeholder="{% trans 'Description' %}">
                <label for="inputNumber" class="sr-only">{% trans 'Retail price' %}</label>
                <input type="text" name="retail_price" id="inputNumber" class="form-control" placeholder="{% trans 'Retail price' %}" required>
                <input type="file" name="thumbnail" id="thumbnail" class="form-control" placeholder="{% trans 'Thumbnail' %}">
                <input type="hidden" name="mode" value="quick"/>
                <button class="btn btn-primary btn-block" type="submit">{% trans 'Quick add' %}</button>
            </fieldset>
        </form>
    </div>
</div>

<script type="text/javascript">
    window.addEventListener("keyup", function(e){ if ((e.keyCode == 39) && (e.altKey)) document.getElementById("next").click(); }, false);
    window.addEventListener("keyup", function(e){ if ((e.keyCode == 37) && (e.altKey)) document.getElementById("previous").click(); }, false);
    window.addEventListener("keyup", function(e){ if (e.keyCode == 27) window.location = "http://localhost:8000/ABC"; }, false);
</script>

{% include 'ABC/footer.html' %}